<template>
    <lightning-card title="AIPlanProcessTab" icon-name="custom:custom14">
        <div class="uncheck-all-button">
            <lightning-button label="Uncheck All" onclick={handleUncheckAll} variant="brand"></lightning-button>
        </div>
        <template for:each={trees} for:item="mainCategory">
            <div class="main_cat_box" key={mainCategory.id}>
                <div class="title-rectangle">
                    <span class="title">{mainCategory.name}</span>
                </div>
                <template for:each={mainCategory.children} for:item="category">
                    <div class="cat_box" key={category.id}>
                        <div class="title-box">
                            {category.name}
                        </div>
                        <div class="container">
                            <template for:each={category.children} for:item="statement">
                                <div class="statement_block" key={statement.id}>
                                    <div class="top-box">
                                        <p class="green-paragraph">
                                            {statement.name}
                                        </p>
                                    </div>
                                    <div style="display: flex; flex-direction: column;">
                                        <div>
                                            <p style="margin-left: 45px; background: #F0F5F1; padding:5px; font-weight: bold; font-size:14px; border-left: 2px solid #4C9EC4; border-top: 2px solid #4C9EC4; border-right:2px solid #4C9EC4">Actions</p>
                                        </div>
                                        <div class="middle-container">
                                            <div class='checkboxes'>
                                                <template for:each={statement.Recommended_Actions__r} for:item="action">
                                                    <div key={action.Id}>
                                                        <input class='checkboxe' type="checkbox"
                                                            checked={action.isSelected__c}
                                                            data-id={action.Id}
                                                            onchange={changeActionStatus}>
                                                        <label class="action">{action.Action__c}</label>
                                                    </div>
                                                </template>
                                            </div>
                                          
                                        </div>
                                        <c-multi-select-combobox
                                        label="Options"
                                        name="options"
                                        options={statement.OtherActions}
                                        onchange={handleChange}
                                      ></c-multi-select-combobox>
                                    </div>                                
                                </div>
                            </template>
                        </div>
                    </div>
                </template>
            </div>
        </template>
        <!-- Confirmation Modal -->
        <template if:true={showModal}>
            <div class="confirmation-modal">
                <div class="modal-content">
                    <p>Are you sure you want to uncheck all?</p>
                    <div class="modal-buttons">
                        <lightning-button label="No"
                            onclick={cancelUncheckAll}></lightning-button>
                        <lightning-button label="Yes" onclick={confirmUncheckAll}
                            variant="brand"></lightning-button>
                    </div>
                </div>
            </div>
        </template> 
    </lightning-card>
</template>
